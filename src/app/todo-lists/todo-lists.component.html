<div fxLayout="column">
  <div class="osmi-todo-controls" fxLayout="column">
    <div class="backlinks osmi-todo-control">
      <button mat-stroked-button color="primary" [routerLink]="['/lists', todo?.parent?._id]" fxHide.lt-sm *ngIf="todo?.parent">
        <mat-icon>arrow_left</mat-icon> Back to {{todo?.parent?.name}}</button>
      <button mat-stroked-button color="primary" [routerLink]="['/lists']" fxHide.lt-sm *ngIf="todo && !todo.parent">
        <mat-icon>arrow_left</mat-icon> Back to overview</button>
    </div>
    <div class="osmi-todo-control" fxLayout="row" fxHide.lt-md>
      <div class="add-new-list" [class.selected]="isKeyboardMode && isAddNewListSelected" fxFlex fxLayout="row">
        <mat-form-field fxFlexFill>
          <input #newList matInput placeholder="Name of the new list" [value]="listInputValue | async" (input)="updateListInputValue($event.target.value)"
            (keydown.enter)="addList()" [class.shaking]="isListInputShaking | async">
        </mat-form-field>
      </div>
      <div fxLayoutAlign="center center">
        <button mat-stroked-button color="accent" (click)="addList()">
          <mat-icon>add</mat-icon> add list</button>
      </div>
    </div>
  </div>

  <div class="todo-lists" fxFlexFill>
    <div *ngFor="let todo of todos | async">
      <osmi-todo-list [todo]="todo"></osmi-todo-list>
      <mat-divider></mat-divider>
    </div>
    <div *ngIf="isListEmpty" class="osmi-todo-empty-list" fxLayout="column" fxFlexFill fxLayoutAlign="center center">
      <mat-icon>list</mat-icon>
      <span>This place looks empty</span>
      <span class="small-hint">Add some lists to get started</span>
    </div>
  </div>
  <div fxHide.gt-sm>
    <img class="osmi-todo-arrow" src="assets/curved-arrow.png" *ngIf="isListEmpty">
    <button mat-fab color="accent" class="todo-mobile-add" (click)="openAddListDialog()">
      <mat-icon>add</mat-icon>
    </button>
  </div>
</div>
